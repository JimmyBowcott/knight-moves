(()=>{"use strict";const t=document.querySelector(".board"),e={start:null,target:null,createBoard(){for(let a=0;a<8;a++)for(let n=0;n<8;n++){const r=document.createElement("div");r.classList.add("square",(a+n)%2==0?"light":"dark"),r.dataset.row=a,r.dataset.col=n,t.appendChild(r),r.addEventListener("dragover",e.onDragOver),r.addEventListener("drop",e.onDrop)}},createPawn(){const t=document.createElement("img");return t.id="pawn",t.src="../media/pawn.png",t.alt="Pawn",t.draggable=!0,t.classList.add("piece"),t.addEventListener("dragstart",e.onDragStart),t},createKnight(){const t=document.createElement("img");return t.id="knight",t.src="../media/knight.png",t.alt="Knight",t.draggable=!0,t.classList.add("piece"),t.addEventListener("dragstart",e.onDragStart),t},getRandomSquare(){const t=document.querySelectorAll(".square");return t[Math.floor(Math.random()*t.length)]},initializePieces(){const t=e.getRandomSquare(),a=e.getRandomSquare();for(;a===t;)a=e.getRandomSquare();const n=e.createPawn(),r=e.createKnight();n.addEventListener("dragstart",e.onDragStart),r.addEventListener("dragstart",e.onDragStart),t.appendChild(n),a.appendChild(r),e.updatePosition("knight",a),e.updatePosition("pawn",t)},onDragStart(t){t.dataTransfer.setData("text/plain",t.target.id),setTimeout((()=>{}),0)},onDragOver(t){t.preventDefault()},onDrop(t){const a=t.dataTransfer.getData("text/plain"),n=document.getElementById(a);t.preventDefault();const r=t.target;r.innerHTML="",r.appendChild(n),e.updatePosition(a,r)},updatePosition(t,a){"knight"===t?e.start=[parseInt(a.dataset.row),parseInt(a.dataset.col)]:e.target=[parseInt(a.dataset.row),parseInt(a.dataset.col)]},delay:t=>new Promise((e=>setTimeout(e,t))),async moveKnight(t){e.disableClicking();const a=document.getElementById("knight");a.style.borderColor="green";for(let n=1;n<t.length;n++){const r=e.getOffset(t[0],t[n]);a.style.transform=`translate(${r[0]}px, ${r[1]-40}px)`,await e.delay(1e3)}await e.delay(2e3),e.resetKnight(),await e.delay(2e3),e.enableClicking(),a.style.borderColor="red"},disableClicking(){document.getElementById("start").classList.add("disabled"),document.querySelector(".board").classList.add("disabled")},enableClicking(){document.getElementById("start").classList.remove("disabled"),document.querySelector(".board").classList.remove("disabled")},resetKnight(){document.getElementById("knight").style.transform="translate(0px, -40px)"},getOffset:(t,e)=>[75*(e[1]-t[1]),60*(e[0]-t[0])]},a=[[1,2],[2,1],[2,-1],[1,-2],[-1,-2],[-2,-1],[-2,1],[-1,2]];class n{constructor(t,e=!1){this.position=t,this.path=this.pass(e)}pass(t){return t||[this.position]}getMoves(){let t=[];for(let e of a){let a=[this.position[0]+e[0],this.position[1]+e[1]];a[0]>=0&&a[0]<=7&&a[1]>=0&&a[1]<=7&&t.push(a)}return t}}e.createBoard(),e.initializePieces(),document.getElementById("start").addEventListener("click",(()=>{const t=function(t,e){for(var a=[new n(t)],r=a.shift();r.position[0]!==e[0]||r.position[1]!==e[1];){let t=r.getMoves();for(var s=0;s<t.length;s++)a.push(new n(t[s],r.path.concat([t[s]])));r=a.shift()}return r.path}(e.start,e.target);e.moveKnight(t)}))})();